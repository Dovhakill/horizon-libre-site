<!DOCTYPE html>
<html lang="fr">
<head>
    <style>
        /* ... (tes styles existants) ... */
        #search-results { max-height: 300px; overflow-y: auto; }
    </style>
</head>
<body>
    <header class="bg-white shadow-sm sticky top-0 z-50">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center py-2">
                <a href="/" title="Accueil - L'Horizon Libre"></a>
                <nav class="hidden md:flex items-center space-x-8"></nav>
                
                <div class="relative">
                    <input type="search" id="search-input" placeholder="Rechercher..." class="border rounded-lg px-4 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500">
                    <div id="search-results" class="hidden absolute top-full left-0 right-0 w-72 bg-white border rounded-lg shadow-lg mt-2 p-2 z-50"></div>
                </div>
            </div>
        </div>
    </header>

    <main></main>
    <footer></footer>
    
    <script>feather.replace();</script>

    <script>
    (function() {
        const searchInput = document.getElementById('search-input');
        const searchResults = document.getElementById('search-results');
        let searchIndex = [];

        fetch('/search-index.json')
            .then(response => response.json())
            .then(data => { searchIndex = data; })
            .catch(error => console.error("Erreur de chargement de l'index:", error));

        searchInput.addEventListener('input', () => {
            const query = searchInput.value.trim().toLowerCase();
            if (query.length < 3) {
                searchResults.classList.add('hidden');
                return;
            }

            const results = searchIndex.filter(item => 
                item.title.toLowerCase().includes(query) || 
                item.description.toLowerCase().includes(query)
            );

            searchResults.innerHTML = '';
            if (results.length > 0) {
                results.slice(0, 5).forEach(result => {
                    const item = document.createElement('a');
                    item.href = result.url;
                    item.className = 'block p-2 text-sm text-gray-800 hover:bg-gray-100 rounded';
                    item.textContent = result.title;
                    searchResults.appendChild(item);
                });
            } else {
                searchResults.innerHTML = '<p class="p-2 text-sm text-gray-500">Aucun r√©sultat.</p>';
            }
            searchResults.classList.remove('hidden');
        });
        
        document.addEventListener('click', (e) => {
            if (!searchResults.contains(e.target) && e.target !== searchInput) {
                searchResults.classList.add('hidden');
            }
        });
    })();
    </script>
</body>
</html>
